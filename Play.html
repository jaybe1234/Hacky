<!DOCTYPE html>
<html manifest="cache.appcache">
<head>
	<meta charset="UTF-8">
	<title>Smoody</title>
	<link rel="stylesheet" type="text/css" href="theme.css">
	<link rel="manifest" href="manifest.json">
	<style>
		body {
			background-color: #F0FFFF;
			color: #6A5ACD;
			font-family: Arial;
			font-size: 24px;
			text-align: center;
		}

	</style>
</head>
<body>
	<script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
          apiKey: "AIzaSyAg8GIjJvg_vznZ3Y52OrmBs115BKAYqOA",
          authDomain: "testpwa-48814.firebaseapp.com",
          databaseURL: "https://testpwa-48814.firebaseio.com",
          projectId: "testpwa-48814",
          messagingSenderId: "322789167425"
        };
        firebase.initializeApp(config);
    </script>
	<script src="test.js"> </script>


	<br><br><h1 id = "question" style="font-size: 40px;"></h1>

	<br><br><br><br>

	<input name="btnButton" type="button" value="เฉลย" OnClick="showAnswer();" class="btn">
	<input name="btnButton1" type="button" value="ไปต่อ" OnClick="changeQuestion();" class="btn">
	<br><br><h1 id ="answer" style="font-size: 40px;">คำตอบ</h1>
	<br><br><br>
	<a href="Menu.html" class="choice" onclick="window.location= "Menu.html"">BACK TO MENU</a>
		<script>
			var questionArray = [];
			var answerArray = [];
			var answer = "hello";
			setTimeout(function() {
			  console.log("async");
			  console.log(questionArray);
			  console.log(answerArray);
			}, 3000);
			getQuiztoArray();

			function getQuiztoArray(){
		  	var rootRef = firebase.database().ref().child("User")
			rootRef.on("child_added", snap=> {
			var question = snap.child("question").val();
			var answer = snap.child("answer").val();
			questionArray.push(question);
			answerArray.push(answer);
			})
			}

			function randomNum(n){
			  return Math.floor(Math.random()*n)
			}
			function showQuestion(n){
			  return questionArray[n];
			}
			function showAnswer(n){
			  return answerArray[n];
			}
			setTimeout(function() {
			  	var n = randomNum(questionArray.length);
				console.log("n is "+n);
				document.getElementById("question").innerHTML = showQuestion(n);
				answer = answerArray[n];
				console.log("answer = "+answer);
			}, 3000);
			
			
			function showAnswer(){
				document.getElementById("answer").innerHTML = answer;
			}
			function changeQuestion(){
				n = randomNum(questionArray.length);
				console.log("n is "+n);
				document.getElementById("question").innerHTML = showQuestion(n);
				answer = answerArray[n];
				console.log("answer = "+answer);


		}
	</script>
</body>
</html